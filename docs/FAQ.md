# Capsulas FAQ

Frequently Asked Questions about Capsulas framework.

## General Questions

### What is Capsulas?

Capsulas is a visual development framework that lets you build production-ready applications by connecting pre-built, type-safe modules called "capsules". Think of it as WordPress for apps, or n8n for full-stack development.

### How does it work?

1. Drag capsules onto a canvas
2. Connect them (with type validation)
3. Configure each capsule
4. Generate TypeScript code
5. Deploy anywhere

### Is it really production-ready?

Yes. Capsulas generates clean TypeScript code that you own. It's not a proprietary runtime - you get actual source code that can be deployed to any platform.

### What makes it different from n8n, Zapier, or Bubble?

| Feature | Capsulas | n8n | Zapier | Bubble |
|---------|----------|-----|--------|--------|
| Generates code you own | Yes | No | No | No |
| Type-safe connections | Yes | No | No | No |
| Deploy anywhere | Yes | Self-hosted only | No | No |
| Open source | Yes | Partial | No | No |
| Works offline | Yes | No | No | No |

## Getting Started

### How do I install Capsulas?

**Desktop App** (recommended):
```bash
# Download from releases page
# Or build from source:
cd packages/desktop
npm install
npm run build:mac  # or build:win, build:linux
```

**CLI**:
```bash
npm install -g @capsulas/cli
capsulas create my-app
capsulas dev
```

**Web Version**:
```bash
cd packages/web
npm start
# Open http://localhost:3050
```

### What do I need to know?

Nothing! But understanding TypeScript and basic programming concepts helps when customizing the generated code.

### Where should I start?

1. Open Capsulas Desktop
2. Drag a few capsules (Auth, Database, AI Chat)
3. Connect them
4. Click "Run Flow" to test
5. Click "Export Code" when ready

## Using Capsulas

### How do I connect capsules?

1. Drag a capsule onto the canvas
2. Click on an output port (right side)
3. Drag to an input port on another capsule
4. Ports light up green if compatible, gray if not

### What do the different port colors mean?

Each port type has a color:
- **Blue**: User data
- **Purple**: Authentication
- **Green**: Generic data
- **Orange**: String
- **Red**: Number
- **Cyan**: Object
- **Light Green**: Array
- **Gray**: Any type (accepts anything)

### Can I connect incompatible ports?

No. Capsulas validates connections in real-time. If ports aren't compatible, you'll see a warning and can't connect them.

### How do I configure a capsule?

1. Click on a capsule
2. Right panel opens
3. Use the tabs:
   - **Parameters**: Capsule-specific settings
   - **Settings**: Execution options
   - **Output**: View connection info
   - **Code**: See generated code

### Can I create custom capsules?

Yes! See [Creating Capsules Guide](./creating-capsules.md).

Basic structure:
```typescript
import { defineCapsule, PORT_TYPES } from '@capsulas/core';

export const myCapsule = defineCapsule({
  name: 'My Capsule',
  description: 'What it does',
  category: 'processing',
  inputs: [
    { id: 'input1', name: 'Input 1', type: PORT_TYPES.STRING }
  ],
  outputs: [
    { id: 'output1', name: 'Output 1', type: PORT_TYPES.OBJECT }
  ],
  execute: async (inputs, config) => {
    // Your logic here
    return {
      output1: { result: 'success' }
    };
  }
});
```

## Generated Code

### Where does the code go?

When you export:
- **Desktop app**: Choose location via file dialog
- **CLI**: `capsulas build` outputs to `dist/`
- **Web**: Downloads as `generated-app.ts`

### What format is the code?

TypeScript, ready to run:
```typescript
// Generated by Capsulas Framework
import { createAuthService } from '@capsulas/capsules/auth';
import { createDatabaseService } from '@capsulas/capsules/database';

async function executeFlow() {
  // Your flow logic
}
```

### Can I modify the generated code?

Yes! It's your code. Capsulas is a starting point, not a runtime. Modify freely.

### How do I run the generated code?

```bash
# Install dependencies
npm install

# Compile TypeScript
npm run build

# Run
node dist/generated-app.js
```

### Can I regenerate code after modifying?

You can regenerate, but you'll lose manual changes. Best practice:
1. Export initial code
2. Set up version control (git)
3. Make changes in a branch
4. If you regenerate, merge carefully

## Deployment

### Where can I deploy?

Anywhere that runs Node.js:
- **Vercel** - Best for Next.js/API routes
- **Railway** - Best for simple backends
- **AWS Lambda** - Best for serverless
- **Heroku** - Traditional hosting
- **Replit** - Fastest prototyping
- **Docker** - Maximum portability
- **Your own server** - Full control

### How do I deploy to Vercel?

1. Export code
2. Create `pages/api/flow.ts`:
```typescript
import { executeFlow } from '../../generated-app';

export default async function handler(req, res) {
  const result = await executeFlow();
  res.json(result);
}
```
3. Add environment variables in Vercel dashboard
4. `vercel --prod`

See [AI Assistant Guide](./AI_ASSISTANT_GUIDE.md) for more platforms.

### What about environment variables?

Capsulas generates `.env.example` with required variables:

```bash
DATABASE_URL=your-database-url
JWT_SECRET=your-secret-key
OPENAI_API_KEY=your-api-key
```

Copy to `.env` and fill in values.

### How do I handle secrets in production?

Never commit `.env` to git. Use platform-specific secret management:
- **Vercel**: Environment Variables in dashboard
- **Railway**: Variables in project settings
- **AWS**: Secrets Manager or Parameter Store
- **Heroku**: Config Vars
- **Docker**: Docker secrets or env files

## Capsules

### How many capsules are available?

Currently 23 official capsules:
- **Auth**: JWT, OAuth (Google, GitHub, Microsoft)
- **Data**: Database (SQL/NoSQL), Cache, Storage
- **AI**: Chat (GPT-4, Claude), Embeddings, Images
- **Communication**: Email, SMS, WebSocket
- **Payments**: Stripe, PayPal
- **Processing**: Queue, Cron, Workflow
- **Integration**: Webhook, REST API

### Which databases are supported?

- **SQL**: PostgreSQL, MySQL, SQLite
- **NoSQL**: MongoDB, DynamoDB
- **Graph**: Neo4j
- **Time-series**: InfluxDB

Configure with `DATABASE_URL` environment variable.

### Which AI providers are supported?

- **OpenAI**: GPT-4, GPT-3.5, DALL-E
- **Anthropic**: Claude 3 (Opus, Sonnet, Haiku)
- **Local**: Ollama for offline AI

### Can I use multiple databases?

Yes! Add multiple database capsules, each with its own connection:
```typescript
const pgService = createDatabaseService({ url: process.env.PG_URL });
const mongoService = createDatabaseService({ url: process.env.MONGO_URL });
```

### How do I handle authentication?

Use auth capsules:
- **JWT**: Token-based auth for APIs
- **OAuth**: Social login (Google, GitHub, etc.)
- **Session**: Cookie-based auth

Connect the auth capsule output to other capsules that need user info.

## Troubleshooting

### My flow won't execute

**Check**:
1. Are all capsules configured? (click each one)
2. Are connections valid? (green ports)
3. Are environment variables set? (check .env)
4. Is there a circular dependency? (A → B → A)

### I see "Port incompatible" error

The output type doesn't match the input type. For example:
- Can't connect `STRING` output to `NUMBER` input
- Can't connect `USER` output to `EMAIL` input

**Fix**: Add a transformation capsule between them, or reconfigure.

### Generated code has errors

**Common causes**:
1. **Missing dependencies**: Run `npm install`
2. **Environment variables**: Create `.env` from `.env.example`
3. **TypeScript errors**: Run `npm run build` to see details

### Code works locally but fails in production

**Check**:
1. Environment variables are set in production
2. Database is accessible from production
3. API keys are valid for production use
4. Correct Node.js version (18+)

### How do I debug generated code?

1. **Add logging**:
```typescript
console.log('Step 1 input:', input_node_1);
const result = await service.execute();
console.log('Step 1 output:', result);
```

2. **Use debugger**:
```typescript
debugger;  // Breakpoint in VS Code
const result = await service.execute();
```

3. **Check flow.json**: See the visual representation

## Performance

### How fast is it?

Capsulas itself is just a code generator - it's fast (< 1 second).

The generated code performance depends on what you build. Generally:
- Simple flows: < 100ms
- Database queries: 50-500ms
- AI calls: 1-5 seconds
- Complex workflows: Varies

### Can I optimize the generated code?

Yes! Common optimizations:

**Parallel execution**:
```typescript
// Sequential (slow)
const result1 = await service1.execute();
const result2 = await service2.execute();

// Parallel (fast)
const [result1, result2] = await Promise.all([
  service1.execute(),
  service2.execute()
]);
```

**Caching**:
```typescript
const cached = await cache.get(key);
if (cached) return cached;

const fresh = await db.query();
await cache.set(key, fresh, 3600);
return fresh;
```

**Connection pooling**: Already enabled in database capsules

### How do I handle high traffic?

1. **Horizontal scaling**: Deploy multiple instances
2. **Caching**: Use Redis cache capsule
3. **Queue**: Use queue capsule for background jobs
4. **CDN**: Serve static assets from CDN
5. **Database indexing**: Optimize your queries

## Advanced

### Can I use Capsulas with existing code?

Yes! Two approaches:

**1. Import existing functions**:
```typescript
import { myExistingFunction } from './legacy-code';

// Use in capsule execute function
execute: async (inputs) => {
  return myExistingFunction(inputs);
}
```

**2. Use Capsulas alongside**:
```typescript
// Your code
import { executeFlow } from './generated-app';

async function myApp() {
  const flowResult = await executeFlow();
  // Use result
}
```

### Can I version my flows?

Yes! Flows are saved as JSON:
```bash
git add flow.json
git commit -m "Add email notification to user signup"
```

### Can I test flows before deploying?

Yes! Use the "Run Flow" button in the editor. It executes locally with your environment variables.

### Can I share flows with others?

Yes! Share the `flow.json` file:
1. File → Save Flow
2. Send `flow.json` to teammate
3. They open it: File → Open Flow

### How do I update capsules?

```bash
npm update @capsulas/core @capsulas/capsules
```

Then regenerate your code to use new features.

### Can I contribute capsules?

Yes! See [Contributing Guide](../CONTRIBUTING.md). Create a capsule and submit a PR.

## Business & Licensing

### Is Capsulas free?

Yes! MIT licensed. Use it for anything, including commercial projects.

### Can I sell apps built with Capsulas?

Absolutely. You own the generated code. Sell it, monetize it, do whatever you want.

### Is there enterprise support?

Not yet, but planned. Contact for early access.

### Can I white-label Capsulas?

Yes, MIT license allows it. You can:
- Remove Capsulas branding
- Customize the interface
- Redistribute as your own tool

### Where can I get help?

- **Documentation**: https://docs.capsulas.dev
- **Discord**: https://discord.gg/capsulas
- **GitHub Issues**: https://github.com/yourusername/capsulas/issues
- **Twitter**: @capsulasdev

## Technical Details

### What's the tech stack?

- **Desktop**: Electron 28
- **Editor**: Vanilla JS (no framework bloat)
- **Core**: TypeScript 5.3
- **Execution**: Node.js 18+
- **Build**: esbuild (fast compilation)

### How does type validation work?

At design time:
1. Each port has a type (STRING, NUMBER, OBJECT, etc.)
2. Connections are checked before creation
3. Incompatible connections are blocked

At runtime:
- No validation (for performance)
- TypeScript ensures correctness at compile time

### Can I extend the type system?

Yes! Edit `packages/core/src/types.ts`:

```typescript
export const PORT_TYPES = {
  // Existing types...
  CUSTOM: { id: 'custom', name: 'Custom', color: '#ff00ff' }
};
```

### How are dependencies managed?

- **Core framework**: Bundled in desktop app
- **Capsules**: npm packages (`@capsulas/capsules`)
- **Generated code**: `package.json` lists only what you use

### Is it secure?

- **Desktop app**: Runs locally, no data sent to servers
- **Generated code**: As secure as you make it (use env vars, validate inputs)
- **Capsules**: Open source, auditable

Best practices:
- Never hardcode secrets
- Validate all inputs
- Use HTTPS in production
- Keep dependencies updated

### What about backwards compatibility?

We follow semantic versioning:
- **Major** (1.0.0 → 2.0.0): Breaking changes
- **Minor** (1.0.0 → 1.1.0): New features, backwards compatible
- **Patch** (1.0.0 → 1.0.1): Bug fixes

Your generated code is independent - it won't break when Capsulas updates.

## Migration

### From n8n?

Similar concepts:
- n8n "nodes" = Capsulas "capsules"
- n8n "connections" = Capsulas "connections"
- n8n "workflows" = Capsulas "flows"

Main difference: Capsulas generates deployable code.

### From Zapier?

1. Map Zapier actions to Capsulas capsules
2. Recreate triggers as entry points
3. Export and deploy anywhere (not limited to Zapier servers)

### From custom code?

1. Identify repeated patterns
2. Wrap them in custom capsules
3. Use visual editor for flow logic
4. Keep complex logic as code, use Capsulas for orchestration

## Still Have Questions?

- Check [AI Assistant Guide](./AI_ASSISTANT_GUIDE.md) for deployment help
- See [Creating Capsules](./creating-capsules.md) for custom capsules
- Join our [Discord](https://discord.gg/capsulas) for community support
- Search [GitHub Issues](https://github.com/yourusername/capsulas/issues)

**Can't find your answer?** [Open an issue](https://github.com/yourusername/capsulas/issues/new) - we'll add it to this FAQ!
